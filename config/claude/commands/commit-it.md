---
description: 変更をConventional Commitsルールに従いcommitする
argument-hint: [commit-message] (optional) - commit見出しメッセージ
allowed-tools: Bash(git commit:*)
---

## 前提・背景

- Gitの変更をCommitする際は、事前にテストの通過確認が必要
- Conventional Commitsルールに従い適切なprefixを付与したcommitメッセージを作成する
- 複数の異なる種類の変更が含まれる場合は、commitを分割する

## タスク

実行するべきタスクを以下に示す。
内容をよく読み、複数並行して進められると判断した場合は、並行して実行すること。

- 現在の変更状況を確認し、適切なcommitメッセージを作成する
- commitメッセージの見出しが引数で指定されている場合は、そのメッセージを使用する
- 引数が未指定の場合は、変更内容を分析して適切なメッセージを生成する
- Conventional Commitsルールに従い適切なprefixを付与する
- 関連するテストが存在する場合は、commit前にテストの通過を確認する

## 完了条件

タスクの完了条件は以下の通りとする。
完了条件、または次の項目で述べる中断条件を満たすまで作業を継続すること。

- 適切なcommitメッセージでcommitが正常に完了した
- 関連テストが全て通過した（テストが存在する場合）

## 実行規約

タスクの実行中は常に以下の規約に従え。

- commitメッセージは以下のConventional Commitsルールに従う：
  - `feat:` 新機能追加
  - `fix:` バグ修正
  - `docs:` ドキュメント変更のみ
  - `style:` コード動作に影響しない変更（空白、フォーマット等）
  - `refactor:` バグ修正でも機能追加でもないコード変更
  - `perf:` パフォーマンス向上のためのコード変更
  - `test:` テストの追加または修正
  - `chore:` ビルドプロセスや補助ツールの変更
- 複数種類の変更が含まれる場合はcommitを分割する
- 引数でcommitメッセージが指定された場合は、そのメッセージにprefixを付与して使用する
- 引数が空または未指定の場合は、変更内容を分析して適切なメッセージを生成する

## 禁止事項

- テストが失敗している状態でのcommitを禁じる
- Conventional Commitsルールに従わないcommitメッセージの使用を禁じる

## 補足事項

タスクに関する補足事項を以下に示す。

- タスクを実行するにあたり、その円滑な進行を妨げる点（不明瞭な指示、必要不可欠な情報の欠損など）がある場合は、その旨をユーザーに報告し、追加の情報を求めよ
- commitメッセージの見出しは50文字以内に収める
- commitメッセージの本文が必要な場合は、72文字で改行する
