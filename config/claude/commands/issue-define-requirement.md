---
description: GitHub Issueから詳細な要件定義を作成しコメントとして投稿
argument-hint: <GitHub IssueのURL>
allowed-tools: Bash(gh issue view:*), Bash(gh issue comment:*)
---

## 前提・背景

- 対象Issue: $ARGUMENTSで指定されたGitHub Issue
- Issue内容及び既存コメントを基に具体的要件を定義すること

## タスク

実行するべきタスクを以下に示す。
内容をよく読み、複数並行して進められると判断した場合は、並行して実行すること。

- `gh issue view --comments $ARGUMENTS --json title,body,labels,assignees,milestone,comments`でIssue詳細お及びコメント取得せよ
- コードベースの関連箇所を調査し現状を把握せよ
- 実装要件を具体的に抽出し整理せよ
- 技術的制約と実現可能性を検証せよ
- 不明点を質問リストとして整理せよ
- 要件定義を作成し`gh issue comment $ARGUMENTS -b "$(要件定義内容)"`で投稿せよ

## 完了条件

タスクの完了条件は以下の通りとする。
完了条件、または次の項目で述べる中断条件を満たすまで作業を継続すること。

- 要件定義がIssueコメントとして正常に投稿されたこと
- 実装可能な具体的内容が詳細に記載されていること  
- 不明点がある場合は`## 確認事項`として明確に列挙されていること
- 投稿後のIssue URLをユーザーに提示したこと

## 実行規約

タスクの実行中は常に以下の規約に従え。

- 日本語で記述せよ
- 実装方針と技術詳細を具体的に記載せよ
- 影響範囲とリスクを明確に示せ
- タスクの優先順位を明示せよ
- 現在のコード構造を正確に反映せよ
- 要件定義は以下の構成とせよ:
  - ## 概要
  - ## 詳細要件
  - ## 技術仕様
  - ## 影響範囲
  - ## リスクと対策
  - ## 実装計画
  - ## 確認事項（必要に応じて）

## 中断条件

以下の条件を満たした場合は作業を中断し、その旨を報告すること。
また、現在の状況と残タスクを簡潔にまとめて提示すること。

- 作業を繰り返す中で、進捗が認められなくなった場合
- Issueの内容が不明瞭で要件定義不可能な場合
- 技術的に実現不可能と判断された場合
- リポジトリへのアクセス権限が不足している場合

## 禁止事項

- タスクに直接関係しないファイルの変更を禁じる
- Issue作成者の意図と異なる要件の追加を禁じる
- 許可なく他IssueやPRの変更を禁じる
- 実装そのものの着手を禁じる

## 補足事項

タスクに関する補足事項を以下に示す。

- 進行を妨げる問題がある場合は即座に報告し追加情報を求めよ
- 実装例やコードスニペットを積極的に含めよ
- 類似機能を参考として言及せよ
- 要件定義投稿時は`## 要件定義`で開始せよ
- 質問がある場合は`## 確認事項`として明確に分離せよ
