---
description: プロジェクトの要件定義書を作成・整備する
argument-hint: <プロジェクト概要>
---

## 前提・背景

本コマンドは、新規プロジェクトまたは既存プロジェクトの要件定義書を作成・整備するためのツールである。
体系的な要件分析により、プロジェクトの目的・スコープ・制約条件を明確化する。

## タスク

実行するべきタスクを以下に示す。
内容をよく読み、複数並行して進められると判断した場合は、並行して実行すること。

1. **初期分析**（並行実行可能）
   - $ARGUMENTSで提供されたプロジェクト概要を分析せよ
   - 既存のREQUIREMENTS.mdが存在する場合は、その内容を確認せよ
   - プロジェクトディレクトリ構造を調査し、既存資料を確認せよ

2. **要件の体系的整理**
   - 機能要件：システムが実現すべき具体的機能を列挙せよ
   - 非機能要件：以下の観点から要件を定義せよ
     - 性能要件（レスポンスタイム、スループットなど）
     - セキュリティ要件（認証、認可、データ保護など）
     - 保守性要件（コード品質、ドキュメント整備など）
     - 可用性要件（稼働率、障害復旧時間など）
   - 制約条件：技術スタック、予算、期限などを明確化せよ
   - ステークホルダー分析：利用者、開発者、運用者の期待値を整理せよ

3. **要件定義書の作成・更新**
   - 不足情報を特定し、具体的な質問リストを作成せよ
   - REQUIREMENTS.mdを体系的な構造で作成または更新せよ
   - 各要件の依存関係を明確化せよ

## 完了条件

タスクの完了条件は以下の通りとする。
完了条件、または次の項目で述べる中断条件を満たすまで作業を継続すること。

- REQUIREMENTS.mdが作成され、以下の要素が含まれている
  - プロジェクト概要と目的
  - 機能要件一覧（優先度・識別子付き）
  - 非機能要件一覧（定量的基準含む）
  - 制約条件と前提条件
  - ステークホルダー定義
- 各要件が具体的かつ検証可能な基準で記述されている
- 要件間の依存関係が明確化されている
- 不足情報が特定され、必要な場合は質問リストが提示されている

## 実行規約

タスクの実行中は常に以下の規約に従え。

### 記述規約
- 要件定義書は日本語で記述せよ
- 各要件には一意な識別子を付与せよ（機能要件：FR-XXX、非機能要件：NFR-XXX）
- 優先度を必須/推奨/任意の3段階で明記せよ
- 定量的な基準・閾値を可能な限り設定せよ（例：「高速」→「3秒以内」）
- 各要件に根拠とコンテキスト情報を含めよ

### 分析手法
- 既存資料はすべて確認し、重複・矛盾を特定せよ
- ステークホルダー別の視点から要件を整理せよ
- 要件の実現可能性を技術的観点から評価せよ
- 要件間の依存関係をマッピングせよ

## 中断条件

以下の条件を満たした場合は作業を中断し、その旨を報告すること。
また、現在の状況と残タスクを簡潔にまとめて提示すること。

- 作業を繰り返す中で、進捗が認められなくなった場合
- プロジェクトの基本情報（目的・スコープ）が不明確で、ユーザーからの追加情報待ちとなった場合
- 要件の整合性に重大な矛盾が発見され、ユーザーの判断が必要な場合

## 禁止事項

- タスクに直接関係しないファイルの変更を禁じる
- 技術的な実装詳細を要件定義書に含めることを禁じる
- ユーザーの確認なしに要件の優先度を勝手に判断することを禁じる

## 補足事項

タスクに関する補足事項を以下に示す。

### 情報収集
- プロジェクトの背景・目的が不明確な場合は、具体的な質問項目を整理してユーザーに確認せよ
- 既存システムがある場合は、現行システムの課題・制約を調査せよ
- 類似プロジェクトの事例があれば参考にせよ

### 品質確保
- 要件の曖昧さ・重複・矛盾を発見した場合は、必ずユーザーに確認せよ
- 技術的実現困難な要件については、代替案を提示せよ
- 要件定義完了時に、抜け漏れチェックリストを提示せよ

### 次工程への連携
- 完了後、次工程として`/prj-define-design`コマンドの実行を提案せよ
- 設計フェーズで必要となる前提条件・制約事項を明確化せよ
